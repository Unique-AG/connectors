{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "connector": {
      "type": "object",
      "description": "Configuration for the backend-service dependency",
      "additionalProperties": true
    },
    "grafana": {
      "type": "object",
      "description": "Grafana dashboard configuration",
      "properties": {
        "dashboard": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable Grafana dashboard creation"
            },
            "folder": {
              "type": "string",
              "description": "Grafana folder name for the dashboard"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "connectorConfig": {
      "type": "object",
      "description": "SharePoint connector configuration",
      "required": ["enabled", "sharepoint", "unique", "processing"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Wether to use the connector config."
        },
        "sharepoint": {
          "type": "object",
          "description": "SharePoint configuration",
          "required": ["baseUrl", "siteIds", "syncColumnName", "graph"],
          "properties": {
            "baseUrl": {
              "type": "string",
              "description": "SharePoint base URL"
            },
            "siteIds": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "SharePoint sites list (UUIDs)"
            },
            "syncColumnName": {
              "type": "string",
              "description": "Column name for synchronization"
            },
            "graph": {
              "type": "object",
              "description": "Microsoft Graph API configuration for Sharepoint",
              "required": ["tenantId", "apiUrl"],
              "properties": {
                "tenantId": {
                  "type": "string",
                  "description": "Azure AD tenant ID"
                },
                "useOidcAuth": {
                  "type": "boolean",
                  "description": "Enable OIDC authentication"
                },
                "apiUrl": {
                  "type": "string",
                  "description": "Microsoft Graph API URL"
                },
                "apiRateLimitPerMinute": {
                  "type": ["number", "null"],
                  "description": "Rate limiting for Graph API requests per minute"
                },
                "clientId": {
                  "type": ["string", "null"],
                  "description": "Microsoft Graph client ID"
                },
                "clientSecret": {
                  "type": ["string", "null"],
                  "description": "Microsoft Graph client secret"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "unique": {
          "type": "object",
          "description": "Unique platform configuration",
          "required": ["fileDiffUrl", "ingestionGraphqlUrl", "zitadel"],
          "properties": {
            "fileDiffUrl": {
              "type": "string",
              "description": "URL for file differences"
            },
            "ingestionGraphqlUrl": {
              "type": "string",
              "description": "GraphQL URL for data ingestion"
            },
            "scopeId": {
              "type": ["string", "null"],
              "description": "Scope ID for scope based ingestion"
            },
            "apiRateLimitPerMinute": {
              "type": "integer",
              "description": "Rate limiting for Unique API requests per minute"
            },
            "zitadel": {
              "type": "object",
              "description": "Zitadel authentication configuration",
              "required": ["clientId", "oauthTokenUrl", "projectId"],
              "properties": {
                "clientId": {
                  "type": "string",
                  "description": "Zitadel client ID"
                },
                "clientSecret": {
                  "type": "string",
                  "description": "Zitadel client secret"
                },
                "oauthTokenUrl": {
                  "type": "string",
                  "description": "OAuth token URL"
                },
                "projectId": {
                  "type": "string",
                  "description": "Zitadel project ID"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "processing": {
          "type": "object",
          "description": "Files processing configuration",
          "required": ["allowedMimeTypes", "concurrency"],
          "properties": {
            "allowedMimeTypes": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of allowed MIME types for file processing"
            },
            "concurrency": {
              "type": "integer",
              "description": "Number of concurrent processing operations"
            },
            "stepTimeoutSeconds": {
              "type": "integer",
              "description": "Timeout in seconds for processing steps"
            },
            "maxFilesToScan": {
              "type": "integer",
              "description": "Maximum number of files to scan"
            },
            "maxFileSizeBytes": {
              "type": ["integer", "null"],
              "description": "Maximum number of files to scan"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
